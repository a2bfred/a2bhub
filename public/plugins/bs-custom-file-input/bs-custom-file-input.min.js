!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,e.bsCustomFileInput=t())}(this,function(){"use strict";function e(){var e=this.parentNode.querySelector(n.CUSTOMFILELABEL);if(e){var t=r(e),l=u(this);l.length?t.textContent=l:i(this)}}function t(){for(var e=[].slice.call(this.querySelectorAll(n.INPUT)).filter(function(e){return!!e.bsCustomFileInput}),t=0,l=e.length;t<l;t++)i(e[t])}var n={CUSTOMFILE:'.custom-file input[type="file"]',CUSTOMFILELABEL:".custom-file-label",FORM:"form",INPUT:"input"},l=function(e){var t="",l=e.parentNode.querySelector(n.CUSTOMFILELABEL);return l&&(t=l.textContent),t},r=function(e){if(e.childNodes.length>0)for(var t=[].slice.call(e.childNodes),n=0;n<t.length;n++){var l=t[n];if(3!==l.nodeType)return l}return e},i=function(e){var t=e.bsCustomFileInput.defaultText,l=e.parentNode.querySelector(n.CUSTOMFILELABEL);if(l){r(l).textContent=t}},o=!!window.File,u=function(e){if(e.hasAttribute("multiple")&&o)return[].slice.call(e.files).map(function(e){return e.name}).join(", ");if(-1!==e.value.indexOf("fakepath")){var t=e.value.split("\\");return t[t.length-1]}return e.value},c={FORMRESET:"reset",INPUTCHANGE:"change"};return{init:function(r,i){void 0===r&&(r=n.CUSTOMFILE),void 0===i&&(i=n.FORM);for(var o=[].slice.call(document.querySelectorAll(r)),u=[].slice.call(document.querySelectorAll(i)),f=0,s=o.length;f<s;f++){var a=o[f];Object.defineProperty(a,"bsCustomFileInput",{value:{defaultText:l(a)},writable:!0}),e.call(a),a.addEventListener(c.INPUTCHANGE,e)}for(var d=0,v=u.length;d<v;d++)u[d].addEventListener(c.FORMRESET,t),Object.defineProperty(u[d],"bsCustomFileInput",{value:!0,writable:!0})},destroy:function(){for(var l=[].slice.call(document.querySelectorAll(n.FORM)).filter(function(e){return!!e.bsCustomFileInput}),r=[].slice.call(document.querySelectorAll(n.INPUT)).filter(function(e){return!!e.bsCustomFileInput}),o=0,u=r.length;o<u;o++){var f=r[o];i(f),f.bsCustomFileInput=void 0,f.removeEventListener(c.INPUTCHANGE,e)}for(var s=0,a=l.length;s<a;s++)l[s].removeEventListener(c.FORMRESET,t),l[s].bsCustomFileInput=void 0}}});